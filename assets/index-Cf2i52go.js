import{y as i,w as u,m as g,o as w,c as y,b as _}from"./index-_MHncM6R.js";const x={style:{overflow:"hidden"}},b={__name:"index",props:{prototies:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}}},setup(f){const e=f,l=i(null),n=i(null),v=i(null),d=i(!0);u(()=>e.element.style.width,()=>{m()}),u(()=>e.element.style.height,()=>{m()}),u(()=>e.prototies.flip.vertical,()=>{c()}),u(()=>e.prototies.flip.horizontal,()=>{c()});function m(a){const{width:o,height:t}=e.element.style;n.value.width=o,n.value.height=t,d.value?(d.value=!1,l.value=document.createElement("img"),l.value.src=e.prototies.url,l.value.onload=()=>{v.value.drawImage(l.value,0,0,o,t),c()}):c()}function c(){const{vertical:a,horizontal:o}=e.prototies.flip,{width:t,height:r}=e.element.style,p=o?-1:1,h=a?-1:1,{value:s}=v;s.clearRect(0,0,t,r),s.translate(t/2-t*p/2,r/2-r*h/2),s.scale(p,h),s.drawImage(l.value,0,0,t,r),s.setTransform(1,0,0,1,0,0)}return g(()=>{var a;v.value=(a=n.value)==null?void 0:a.getContext("2d"),m()}),(a,o)=>(w(),y("div",x,[_("canvas",{ref_key:"canvas",ref:n},null,512)]))}};export{b as default};
